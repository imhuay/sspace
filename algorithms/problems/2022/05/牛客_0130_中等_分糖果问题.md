## åˆ†ç³–æœé—®é¢˜
<!--START_SECTION:badge-->
![last modify](https://img.shields.io/static/v1?label=last%20modify&message=2025-07-08%2016%3A53%3A13&label_color=gray&color=thistle&style=flat-square)
[![](https://img.shields.io/static/v1?label=&message=%E4%B8%AD%E7%AD%89&label_color=gray&color=yellow&style=flat-square)](../../../README.md#ä¸­ç­‰)
[![](https://img.shields.io/static/v1?label=&message=%E7%89%9B%E5%AE%A2&label_color=gray&color=green&style=flat-square)](../../../README.md#ç‰›å®¢)
[![](https://img.shields.io/static/v1?label=&message=%E8%B4%AA%E5%BF%83&label_color=gray&color=blue&style=flat-square)](../../../README.md#è´ªå¿ƒ)
<!--END_SECTION:badge-->
<!--info
tags: [è´ªå¿ƒ]
source: ç‰›å®¢
level: ä¸­ç­‰
number: '0130'
name: åˆ†ç³–æœé—®é¢˜
companies: []
-->

> [åˆ†ç³–æœé—®é¢˜_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘](https://www.nowcoder.com/practice/76039109dd0b47e994c08d8319faa352)

<summary><b>é—®é¢˜ç®€è¿°</b></summary>

```txt
ä¸€ç¾¤å­©å­åšæ¸¸æˆ, ç°åœ¨è¯·ä½ æ ¹æ®æ¸¸æˆå¾—åˆ†æ¥å‘ç³–æœ, è¦æ±‚å¦‚ä¸‹:
    1. æ¯ä¸ªå­©å­ä¸ç®¡å¾—åˆ†å¤šå°‘, èµ·ç åˆ†åˆ°ä¸€ä¸ªç³–æœ.
    2. ä»»æ„ä¸¤ä¸ªç›¸é‚»çš„å­©å­ä¹‹é—´, å¾—åˆ†è¾ƒå¤šçš„å­©å­å¿…é¡»æ‹¿å¤šä¸€äº›ç³–æœ. (è‹¥ç›¸åŒåˆ™æ— æ­¤é™åˆ¶)
ç»™å®šä¸€ä¸ªæ•°ç»„ arr ä»£è¡¨å¾—åˆ†æ•°ç»„, è¯·è¿”å›æœ€å°‘éœ€è¦å¤šå°‘ç³–æœ.

è¿›é˜¶1: ç©ºé—´å¤æ‚åº¦ O(1)
è¿›é˜¶2: ç›¸é‚»åˆ†æ•°ç›¸åŒåˆ†åˆ°çš„ç³–æœæ•°ä¸€æ ·, å…¶ä»–è§„åˆ™ä¸å˜ (é˜¿é‡Œ)
```

<!--
<details><summary><b>è¯¦ç»†æè¿°</b></summary>

```txt
```

</details>
-->

<!-- <div align="center"><img src="../../../_assets/xxx.png" height="300" /></div> -->

<summary><b>æ€è·¯: è´ªå¿ƒ</b></summary>

> [åˆ†ç³–æœé—®é¢˜åŠå…¶è¿›é˜¶ - å·¦ç¨‹äº‘](https://www.bilibili.com/video/BV1vi4y1R7g9?p=11)

- åˆ†åˆ«è®°å½•ä»å·¦åˆ°å³å’Œä»å³åˆ°å·¦çš„ "å¡åº¦" åºåˆ—, ç„¶ååœ¨å„ä½ç½®å»å¯¹åº”å¡åº¦çš„æœ€å¤§å€¼;
- å…·ä½“ "å¡åº¦" çš„å®šä¹‰å¦‚ä¸‹:
    ```
    åˆ†æ•°åºåˆ—:
        arr = [1,2,3,4,2,1,2,3,2]
    å·¦â†’å³å¡åº¦, å³ l[i] = l[i-1] + 1 if arr[i] > arr[i-1] else 1
        l   = [1,2,3,4,1,1,2,3,1]
    å³â†’å·¦å¡åº¦, å³ r[i] = r[i+1] + 1 if arr[i] > arr[i+1] else 1
        r   = [1,1,1,3,2,1,1,2,1]
    å¯¹åº”ä½ç½®å–æœ€å¤§å€¼
        ret = [1,2,3,4,2,1,2,3,1] -> 19
    ```
- è¿›é˜¶ 1: ä½¿ç”¨ä¸¤ä¸ªå˜é‡è®°å½•ä¸Šå¡é•¿åº¦å’Œä¸‹å¡é•¿åº¦ (éœ€è¦ä¸€å®šçš„ç¼–ç¨‹æŠ€å·§) ;
    > [åˆ†å‘ç³–æœ (æ–¹æ³•2) - åŠ›æ‰£å®˜æ–¹é¢˜è§£](https://leetcode-cn.com/problems/candy/solution/fen-fa-tang-guo-by-leetcode-solution-f01p/)
- è¿›é˜¶ 2: ç”Ÿæˆ l å’Œ r çš„è¿‡ç¨‹ä¸­è‹¥å½“å‰å¾—åˆ†ä¸ä¸Šä¸€ä½ç½®ç›¸åŒ, åˆ™å–ä¸Šä¸€ä½ç½®çš„å¾—åˆ†å³å¯;

<details><summary><b>Python</b></summary>

```python
class Solution:
    def candy(self , arr: List[int]) -> int:
        N = len(arr)
        l = [1] * N
        r = [1] * N
        for i in range(1, N):
            l[i] = l[i - 1] + 1 if arr[i] > arr[i - 1] else 1
            r[N - i - 1] = r[N - i] + 1 if arr[N - i - 1] > arr[N - i] else 1

        ret = 0
        for i in range(N):
            ret += max(l[i], r[i])
        return ret
```

</details>


<details><summary><b>Python (è¿›é˜¶ 1) </b></summary>

```python
class Solution:
    def candy(self, arr: List[int]) -> int:
        N = len(arr)
        ret = 1
        inc, dec, pre = 1, 0, 1

        for i in range(1, N):
            if arr[i] >= arr[i - 1]:
                dec = 0
                pre = 1 if arr[i] == arr[i - 1] else pre + 1
                ret += pre
                inc = pre
            else:
                dec += 1
                if dec == inc: dec += 1
                ret += dec
                pre = 1

        return ret
```

</details>


<details><summary><b>Python (è¿›é˜¶ 2) </b></summary>

```python
class Solution:
    def candy(self , arr: List[int]) -> int:
        N = len(arr)
        l = [1] * N
        r = [1] * N
        for i in range(1, N):
            if arr[i] > arr[i - 1]: l[i] = l[i - 1] + 1
            elif arr[i] == arr[i - 1]: l[i] = l[i - 1]

            if arr[N - i - 1] > arr[N - i]: r[N - i - 1] = r[N - i] + 1
            elif arr[N - i - 1] == arr[N - i]: r[N - i - 1] = r[N - i]

        ret = 0
        for i in range(N):
            ret += max(l[i], r[i])
        return ret
```

</details>
<!--START_SECTION:relate-->
---

### ç›¸å…³ä¸»é¢˜

<details><summary><b>è´ªå¿ƒ</b></summary>

> [[ä¸­ç­‰, LeetCode] ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII ğŸ”¥](../06/LeetCode_0122_ä¸­ç­‰_ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII.md)  
> [[ä¸­ç­‰, LeetCode] æœ€é•¿é€’å¢å­åºåˆ— ğŸ”¥](../06/LeetCode_0300_ä¸­ç­‰_æœ€é•¿é€’å¢å­åºåˆ—.md)  
> [[ä¸­ç­‰, LeetCode] ç››æœ€å¤šæ°´çš„å®¹å™¨ ğŸ”¥](../../2021/10/LeetCode_0011_ä¸­ç­‰_ç››æœ€å¤šæ°´çš„å®¹å™¨.md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer] å‰ªç»³å­ï¼ˆæ•´æ•°æ‹†åˆ†ï¼‰](../../2021/11/å‰‘æŒ‡Offer_1401_ä¸­ç­‰_å‰ªç»³å­ï¼ˆæ•´æ•°æ‹†åˆ†ï¼‰.md)  
  > 

</details>
<!--END_SECTION:relate-->