## å­—å…¸æ ‘çš„å®ç°
<!--START_SECTION:badge-->
![last modify](https://img.shields.io/static/v1?label=last%20modify&message=2025-07-08%2016%3A53%3A13&label_color=gray&color=thistle&style=flat-square)
[![](https://img.shields.io/static/v1?label=&message=%E4%B8%AD%E7%AD%89&label_color=gray&color=yellow&style=flat-square)](../../../README.md#ä¸­ç­‰)
[![](https://img.shields.io/static/v1?label=&message=%E7%89%9B%E5%AE%A2&label_color=gray&color=green&style=flat-square)](../../../README.md#ç‰›å®¢)
[![](https://img.shields.io/static/v1?label=&message=%E8%AE%BE%E8%AE%A1&label_color=gray&color=blue&style=flat-square)](../../../README.md#è®¾è®¡)
<!--END_SECTION:badge-->
<!--info
tags: [è®¾è®¡]
source: ç‰›å®¢
level: ä¸­ç­‰
number: '0124'
name: å­—å…¸æ ‘çš„å®ç°
companies: []
-->

> [å­—å…¸æ ‘çš„å®ç°_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘](https://www.nowcoder.com/practice/a55a584bc0ca4a83a272680174be113b)

<summary><b>é—®é¢˜ç®€è¿°</b></summary>

```txt
å­—å…¸æ ‘åˆç§°ä¸ºå‰ç¼€æ ‘æˆ–è€…Trieæ ‘, æ˜¯å¤„ç†å­—ç¬¦ä¸²å¸¸ç”¨çš„æ•°æ®ç»“æ„.

å‡è®¾ç»„æˆæ‰€æœ‰å•è¯çš„å­—ç¬¦ä»…æ˜¯ 'a' ï½ 'z' , è¯·å®ç°å­—å…¸æ ‘çš„ç»“æ„, å¹¶åŒ…å«ä»¥ä¸‹å››ä¸ªä¸»è¦çš„åŠŸèƒ½.

1. void insert(String word): æ·»åŠ word, å¯é‡å¤æ·»åŠ ;
2. void delete(String word): åˆ é™¤word, å¦‚æœwordæ·»åŠ è¿‡å¤šæ¬¡, ä»…åˆ é™¤ä¸€æ¬¡;
3. boolean search(String word): æŸ¥è¯¢wordæ˜¯å¦åœ¨å­—å…¸æ ‘ä¸­å‡ºç°è¿‡(å®Œæ•´çš„å‡ºç°è¿‡, å‰ç¼€å¼ä¸ç®—);
4. int prefixNumber(String pre): è¿”å›ä»¥å­—ç¬¦ä¸²preä½œä¸ºå‰ç¼€çš„å•è¯æ•°é‡.

ç°åœ¨ç»™å®šä¸€ä¸ªm, è¡¨ç¤ºæœ‰mæ¬¡æ“ä½œ, æ¯æ¬¡æ“ä½œéƒ½ä¸ºä»¥ä¸Šå››ç§æ“ä½œä¹‹ä¸€. æ¯æ¬¡æ“ä½œä¼šç»™å®šä¸€ä¸ªæ•´æ•°opå’Œä¸€ä¸ªå­—ç¬¦ä¸²word, opä»£è¡¨ä¸€ä¸ªæ“ä½œç , å¦‚æœopä¸º1, åˆ™ä»£è¡¨æ·»åŠ word, opä¸º2åˆ™ä»£è¡¨åˆ é™¤word, opä¸º3åˆ™ä»£è¡¨æŸ¥è¯¢wordæ˜¯å¦åœ¨å­—å…¸æ ‘ä¸­, opä¸º4ä»£è¡¨è¿”å›ä»¥wordä¸ºå‰ç¼€çš„å•è¯æ•°é‡ (æ•°æ®ä¿è¯ä¸ä¼šåˆ é™¤ä¸å­˜åœ¨çš„word) .

å¯¹äºæ¯æ¬¡æ“ä½œ, å¦‚æœopä¸º3æ—¶, å¦‚æœwordåœ¨å­—å…¸æ ‘ä¸­, è¯·è¾“å‡º "YES" , å¦åˆ™è¾“å‡º "NO" ; å¦‚æœopä¸º4æ—¶, è¯·è¾“å‡ºè¿”å›ä»¥wordä¸ºå‰ç¼€çš„å•è¯æ•°é‡, å…¶å®ƒæƒ…å†µä¸è¾“å‡º.

è¿›é˜¶: æ‰€æœ‰æ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ»¡è¶³ O(n)
```

<!--
<details><summary><b>è¯¦ç»†æè¿°</b></summary>

```txt
```

</details>
-->

<!-- <div align="center"><img src="../../../_assets/xxx.png" height="300" /></div> -->

<summary><b>æ€è·¯</b></summary>

- æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª N å‰æ ‘, æ ¹æ®éœ€æ±‚, ä¸ºæ¯ä¸ªèŠ‚ç‚¹æ·»åŠ ä¸€äº›å±æ€§ä»¥è¾¾åˆ°æŸäº›æ“ä½œçš„è¦æ±‚;
    ```python
    class TrieNode:
        def __init__(self):
            self.children = [None] * 26  # å­èŠ‚ç‚¹ (è¯è¡¨å¤§å°ä¸º 26)
            self.is_end = False          # è¯¥èŠ‚ç‚¹æ˜¯å¦ä¸ºå•è¯
            self.pre_cnt = 0             # è®°å½•è¯¥è·¯å¾„çš„ä½œä¸ºå‰ç¼€çš„æ¬¡æ•°
    ```
- ç›¸åŒå®ç° Python å®ç°ä¼šè¶…æ—¶; Java ä¸ä¼š;

    <details><summary><b>Python classdata è¸©å‘</b></summary>

    ```python
    @dataclass
    class TrieNode:
        children = [None] * 26  # æ‰€æœ‰ node çš„ children éƒ½æŒ‡å‘åŒä¸€ä¸ªå¼•ç”¨
        is_end = False
        pre_cnt = 0

        # def __post_init__(self):

    t1 = TrieNode()
    t2 = TrieNode()

    print(t1.children is t2.children)  # True

    # æ­£ç¡®è®¾ç½®é»˜è®¤å€¼çš„æ–¹æ³•æ˜¯ä½¿ç”¨ __post_init__
    @dataclass
    class TrieNode:
        children = None
        is_end = False  # åŸºæœ¬ç±»å‹æ²¡æœ‰å…³ç³»
        pre_cnt = 0

        def __post_init__(self):
            self.children = [None] * 26


    t1 = TrieNode()
    t2 = TrieNode()

    print(t1.children is t2.children)  # False
    ```

    </details>

<details><summary><b>Python (è¶…æ—¶) </b></summary>

```python
class TrieNode:
    def __init__(self):
        self.is_end = False
        self.children = [None] * 26
        self.pre_cnt = 0

class Trie:

    root = TrieNode()

    def insert(self, word):
        cur = self.root
        for c in word:
            idx = ord(c) - ord('a')
            if not cur.children[idx]:
                cur.children[idx] = TrieNode()
            cur = cur.children[idx]
            cur.pre_cnt += 1
        cur.is_end = True

    def delete(self, word):
        # åªæœ‰å­˜åœ¨çš„æƒ…å†µå†è¿›è¡Œåˆ é™¤
        if not self.search(word): return

        cur = self.root
        for c in word:
            idx = ord(c) - ord('a')
            cur = cur.children[idx]
            cur.pre_cnt -= 1

        if cur.pre_cnt == 0:
            cur.is_end = False

    def search(self, word):
        cur = self.root
        for c in word:
            idx = ord(c) - ord('a')
            if not cur.children[idx]:
                return False
            cur = cur.children[idx]

        return cur.is_end

    def prefixNumber(self, pre):
        cur = self.root
        for c in pre:
            idx = ord(c) - ord('a')
            if not cur.children[idx]:
                return 0
            cur = cur.children[idx]
            if cur.pre_cnt == 0:
                return 0

        return cur.pre_cnt


class Solution:
    def trieU(self , operators: List[List[str]]) -> List[str]:

        trie = Trie()
        ret = []
        for i, w in operators:
            if i == '1':
                trie.insert(w)
            elif i == '2':
                trie.delete(w)
            elif i == '3':
                r = 'YES' if trie.search(w) else 'NO'
                ret.append(r)
            else:
                r = str(trie.prefixNumber(w))
                ret.append(r)

        return ret
```

</details>


<details><summary><b>Java</b></summary>

```java
import java.util.*;

class TrieNode {
    TrieNode[] children;  // å­èŠ‚ç‚¹
    boolean is_end;
    int pre_cnt;

    TrieNode() {
        children = new TrieNode[26];
        pre_cnt = 0;
        is_end = false;
    }
}

class Trie {
    TrieNode root = new TrieNode();

    Trie() { }

    void insert(String word) {
        TrieNode node = root;
        for (char c : word.toCharArray()) {
            if (node.children[c - 'a'] == null) {
                node.children[c - 'a'] = new TrieNode();
            }
            node = node.children[c - 'a'];
            node.pre_cnt++;
        }
        node.is_end = true;
    }

    void delete(String word) {
        // åªæœ‰å­˜åœ¨çš„æƒ…å†µå†è¿›è¡Œåˆ é™¤ (è™½ç„¶æ²¡æœ‰è¿™å¥ä¹Ÿèƒ½ AC)
        if (!search(word)) return;

        TrieNode node = root;
        for (char c : word.toCharArray()) {
            node = node.children[c - 'a'];
            node.pre_cnt--;
        }
        if (node.pre_cnt == 0) {
            node.is_end = false;
        }
    }

    boolean search(String word) {
        TrieNode node = root;
        for (char c : word.toCharArray()) {
            if (node.children[c - 'a'] == null) {
                return false;
            }
            node = node.children[c - 'a'];
        }

        return node.is_end;
    }

    int prefixNumber(String pre) {
        TrieNode node = root;
        for (char c : pre.toCharArray()) {
            if (node.children[c - 'a'] == null) {
                return 0;
            }
            node = node.children[c - 'a'];
        }

        return node.pre_cnt;
    }
}

public class Solution {
    /**
     * @param operators stringå­—ç¬¦ä¸²äºŒç»´æ•°ç»„ the ops
     * @return stringå­—ç¬¦ä¸²ä¸€ç»´æ•°ç»„
     */
    public String[] trieU(String[][] operators) {

        ArrayList<String> ret = new ArrayList<>();
        Trie trie = new Trie();

        for (String[] opera : operators) {
            if (opera[0].equals("1")) {
                trie.insert(opera[1]);
            } else if (opera[0].equals("2")) {
                trie.delete(opera[1]);
            } else if (opera[0].equals("3")) {
                ret.add(trie.search(opera[1]) ? "YES" : "NO");
            } else if (opera[0].equals("4")) {
                ret.add(String.valueOf(trie.prefixNumber(opera[1])));
            }
        }

        String[] ans = new String[ret.size()];
        ret.toArray(ans);
        return ans;
    }
}
```

</details>
<!--START_SECTION:relate-->
---

### ç›¸å…³ä¸»é¢˜

<details><summary><b>è®¾è®¡</b></summary>

> [[ä¸­ç­‰, å‰‘æŒ‡Offer] é˜Ÿåˆ—çš„æœ€å¤§å€¼](../01/å‰‘æŒ‡Offer_5902_ä¸­ç­‰_é˜Ÿåˆ—çš„æœ€å¤§å€¼.md)  
  > 
> [[å›°éš¾, å‰‘æŒ‡Offer] æ•°æ®æµä¸­çš„ä¸­ä½æ•°](../../2021/12/å‰‘æŒ‡Offer_4100_å›°éš¾_æ•°æ®æµä¸­çš„ä¸­ä½æ•°.md)  
> [[å›°éš¾, ç‰›å®¢] è®¾è®¡LFUç¼“å­˜ç»“æ„ ğŸ”¥](../04/ç‰›å®¢_0094_å›°éš¾_è®¾è®¡LFUç¼“å­˜ç»“æ„.md)  
> [[å›°éš¾, ç‰›å®¢] è®¾è®¡LRUç¼“å­˜ç»“æ„ ğŸ”¥](../04/ç‰›å®¢_0093_å›°éš¾_è®¾è®¡LRUç¼“å­˜ç»“æ„.md)  
  > 
> [[ç®€å•, å‰‘æŒ‡Offer] åŒ…å«minå‡½æ•°çš„æ ˆ](../../2021/11/å‰‘æŒ‡Offer_3000_ç®€å•_åŒ…å«minå‡½æ•°çš„æ ˆ.md)  
> [[ç®€å•, å‰‘æŒ‡Offer] ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—](../../2021/11/å‰‘æŒ‡Offer_0900_ç®€å•_ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—.md)  
  > 

</details>
<!--END_SECTION:relate-->