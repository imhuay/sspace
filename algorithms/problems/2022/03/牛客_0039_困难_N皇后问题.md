## Nçš‡åé—®é¢˜
<!--START_SECTION:badge-->
![last modify](https://img.shields.io/static/v1?label=last%20modify&message=2025-07-08%2016%3A53%3A13&label_color=gray&color=thistle&style=flat-square)
[![](https://img.shields.io/static/v1?label=&message=%E5%9B%B0%E9%9A%BE&label_color=gray&color=yellow&style=flat-square)](../../../README.md#å›°éš¾)
[![](https://img.shields.io/static/v1?label=&message=%E7%89%9B%E5%AE%A2&label_color=gray&color=green&style=flat-square)](../../../README.md#ç‰›å®¢)
[![](https://img.shields.io/static/v1?label=&message=%E9%80%92%E5%BD%92&label_color=gray&color=blue&style=flat-square)](../../../README.md#é€’å½’)
[![](https://img.shields.io/static/v1?label=&message=%E4%BD%8D%E8%BF%90%E7%AE%97&label_color=gray&color=blue&style=flat-square)](../../../README.md#ä½è¿ç®—)
<!--END_SECTION:badge-->
<!--info
tags: [é€’å½’, ä½è¿ç®—]
source: ç‰›å®¢
level: å›°éš¾
number: '0039'
name: Nçš‡åé—®é¢˜
companies: []
-->

> [Nçš‡åé—®é¢˜_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘](https://www.nowcoder.com/practice/c76408782512486d91eea181107293b6)

<summary><b>é—®é¢˜ç®€è¿°</b></summary>

```txt
N çš‡åé—®é¢˜æ˜¯æŒ‡åœ¨ n * n çš„æ£‹ç›˜ä¸Šè¦æ‘† n ä¸ªçš‡å,
è¦æ±‚: ä»»ä½•ä¸¤ä¸ªçš‡åä¸åŒè¡Œ, ä¸åŒåˆ—ä¹Ÿä¸åœ¨åŒä¸€æ¡æ–œçº¿ä¸Š,
æ±‚ç»™ä¸€ä¸ªæ•´æ•° n , è¿”å› n çš‡åçš„æ‘†æ³•æ•°.
```

<!--
<details><summary><b>è¯¦ç»†æè¿°</b></summary>

```txt
```

</details>
-->


<!-- <div align="center"><img src="../../../_assets/xxx.png" height="300" /></div> -->

<summary><b>æ€è·¯: DFS</b></summary>

<!-- å·¦ç¨‹äº‘ç®—æ³•: Nçš‡åé—®é¢˜ https://www.bilibili.com/video/BV1NU4y1M7rF?p=9&t=8702.4 -->

- å®šä¹‰ `book[i]=j` è¡¨ç¤ºç¬¬ `i` è¡Œã€ç¬¬ `j` åˆ—æ”¾äº†ä¸€ä¸ª "çš‡å" ;
- DFS æ¯ä¸€è¡Œ, æ£€æŸ¥è¯¥è¡Œçš„æ¯ä¸ªç‚¹ `(i,j)` æ˜¯å¦ä¸å·²ç»æ”¾ç½®çš„ç‚¹ `(i_,j_)` æ˜¯å¦å…±è¡Œã€å…±åˆ—ã€å…±æ–œçº¿;
    - æ£€æŸ¥æ˜¯å¦å…±æ–œçº¿: `abs(æ–œç‡) != 1`
- ã€DFS æ‰¾æ–¹æ³•æ•°ã€‘åˆå§‹åŒ–å…¨å±€å˜é‡ `ret=0` è®°å½•å¯è¡Œçš„æ–¹æ³•æ•°, èƒ½é¡ºåˆ©èµ°åˆ°é€’å½’åŸºå°± `+1`;

<details><summary><b>Python (æ¨è) </b></summary>

```python
#
# ä»£ç ä¸­çš„ç±»åã€æ–¹æ³•åã€å‚æ•°åå·²ç»æŒ‡å®š, è¯·å‹¿ä¿®æ”¹, ç›´æ¥è¿”å›æ–¹æ³•è§„å®šçš„å€¼å³å¯
#
# @param n intæ•´å‹ the n
# @return intæ•´å‹
#
class Solution:
    def Nqueen(self , n: int) -> int:
        # book[i] = j è¡¨ç¤ºç¬¬ i è¡Œçš„ "çš‡å" æ”¾åœ¨äº†ç¬¬ j åˆ—
        book = [-1] * n

        def valid(i, j):
            """éªŒè¯å½“å‰ç‚¹ (i,j) ä¸æ‰€æœ‰å·²ç»æ”¾ç½®çš„ç‚¹ (i_,j_) æ˜¯å¦å…±åˆ—æˆ–å…±æ–œçº¿"""
            for i_ in range(i):
                j_ = book[i_]
                # å¦‚æœå…±åˆ—æˆ–å…±æ–œçº¿, å› ä¸º i_ < i, æ‰€ä»¥ä¸ä¼šå…±è¡Œ
                if j == j_ or abs(i - i_) == abs(j - j_):
                    return False
            return True

        # è®°å½•æ‰¾åˆ°çš„æ–¹æ³•æ•°
        self.ret = 0

        def dfs(i):
            """æ·±åº¦ä¼˜å…ˆéå†æ¯ä¸€è¡Œ"""
            if i == n:  # æ‰¾åˆ°ä¸€ç§æ‘†æ³•
                self.ret += 1
                return

            for j in range(n):  # éå†ç¬¬ i è¡Œçš„æ¯ä¸ªç‚¹ (i, j)
                if valid(i, j):  # éªŒè¯å½“å‰ç‚¹ (i, j) æ˜¯å¦èƒ½æ”¾
                    book[i] = j
                    dfs(i + 1)
                    # book[i] = -1  # è¿™é‡Œä¸éœ€è¦å›æº¯, å› ä¸º valid åªä¼šéå† book[0:i-1]
        dfs(0)
        return self.ret
```

</details>


**ä¼˜åŒ–**: æœ€ä¼˜æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(n^n)$, ä½†æ˜¯å¯ä»¥åˆ©ç”¨ä½è¿ç®—ä¼˜åŒ–å¸¸æ•°é¡¹ (æ ¸å¿ƒåˆ©ç”¨äºŒè¿›åˆ¶çŠ¶æ€å‹ç¼©ä¼˜åŒ– `valid` çš„åˆ¤æ–­) ;
> å› ä¸º Python ä¸­çš„ä½è¿ç®—è·Ÿå…¶ä»–è¯­è¨€ç•¥æœ‰åŒºåˆ«, ä¸‹é¢çš„ä»£ç ç”¨ C++ å®Œæˆ;

<details><summary><b>C++</b></summary>

```cpp
class Solution {
    int ret = 0;  // è®°å½•æ‰¾åˆ°çš„æ–¹æ³•æ•°

    void dfs(int c, int l, int r, int limit) {
        if (c == limit) {  // åˆ—éƒ½å¡«æ»¡äº†, è¯´æ˜æ‰¾åˆ°äº†ä¸€ç§æ‘†æ³•
            ret += 1;
            return;
        }
        // å½“å‰è¡Œå¯ä»¥æ‘†æ”¾çš„ä½ç½®
        int pos = limit & (~(c | l | r));
        while (pos) {
            // æ‰¾åˆ° pos ä¸­æœ€å³ä¾§çš„ 1
            int R1 = pos & (~pos + 1);
            dfs(c | R1,  // å¢åŠ ä¸€ä¸ªåˆ—é™åˆ¶
                (l | R1) << 1,  // åŠ ä¸€ä¸ª å·¦æ–œçº¿çš„é™åˆ¶
                (r | R1) >> 1,  // åŠ ä¸€ä¸ª å³æ–œçº¿çš„é™åˆ¶
                limit);  // limit ä¸å˜
            pos -= R1;  // æŠŠæœ€å³çš„ 1 æ¸… 0
        }
    }

public:
    int Nqueen(int n) {
        // limit çš„å n ä½ä¸º 1, å› ä¸º n <= 9, æ‰€ä»¥ int å°±å¤Ÿäº†
        // limit çš„ä½œç”¨æ˜¯é™åˆ¶æœ‰æ•ˆä½ç½®, è¯¥å€¼å…¨ç¨‹ä¸ä¼šæ”¹å˜
        int limit = (1 << n) - 1;
        dfs(0, 0, 0, limit);  // åˆå§‹å…¨ 0, è¡¨ç¤ºéƒ½æ²¡æœ‰é™åˆ¶
        return ret;
    }
};
```

</details>
<!--START_SECTION:relate-->
---

### ç›¸å…³ä¸»é¢˜

<details><summary><b>é€’å½’</b></summary>

> [[ä¸­ç­‰, LeetCode] å…¨æ’åˆ— ğŸ”¥](../10/LeetCode_0046_ä¸­ç­‰_å…¨æ’åˆ—.md)  
> [[ä¸­ç­‰, LeetCode] å…¨æ’åˆ—II ğŸ”¥](../10/LeetCode_0047_ä¸­ç­‰_å…¨æ’åˆ—II.md)  
> [[ä¸­ç­‰, LeetCode] ç»„åˆæ€»å’Œ ğŸ”¥](../10/LeetCode_0039_ä¸­ç­‰_ç»„åˆæ€»å’Œ.md)  
> [[ä¸­ç­‰, LeetCode] ç»„åˆæ€»å’ŒII ğŸ”¥](../10/LeetCode_0040_ä¸­ç­‰_ç»„åˆæ€»å’ŒII.md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer] äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨ ğŸ”¥](../../2021/12/å‰‘æŒ‡Offer_3600_ä¸­ç­‰_äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨.md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer] æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹ (å¿«é€Ÿå¹‚) ğŸ”¥](../../2021/11/å‰‘æŒ‡Offer_1600_ä¸­ç­‰_æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹(å¿«é€Ÿå¹‚).md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer] æ ‘çš„å­ç»“æ„](../../2021/11/å‰‘æŒ‡Offer_2600_ä¸­ç­‰_æ ‘çš„å­ç»“æ„.md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer] æ±‚1~nçš„å’Œ](../01/å‰‘æŒ‡Offer_6400_ä¸­ç­‰_æ±‚1~nçš„å’Œ.md)  
> [[ä¸­ç­‰, ç‰›å®¢] åŠ èµ·æ¥å’Œä¸ºç›®æ ‡å€¼çš„ç»„åˆ(äºŒ)](ç‰›å®¢_0046_ä¸­ç­‰_åŠ èµ·æ¥å’Œä¸ºç›®æ ‡å€¼çš„ç»„åˆ(äºŒ).md)  
> [[ä¸­ç­‰, ç‰›å®¢] æ‹¬å·ç”Ÿæˆ](../02/ç‰›å®¢_0026_ä¸­ç­‰_æ‹¬å·ç”Ÿæˆ.md)  
> [[ä¸­ç­‰, ç‰›å®¢] æœ‰é‡å¤é¡¹æ•°å­—çš„å…¨æ’åˆ—](ç‰›å®¢_0042_ä¸­ç­‰_æœ‰é‡å¤é¡¹æ•°å­—çš„å…¨æ’åˆ—.md)  
> [[ä¸­ç­‰, ç‰›å®¢] æ±‰è¯ºå¡”é—®é¢˜ ğŸ”¥](ç‰›å®¢_0067_ä¸­ç­‰_æ±‰è¯ºå¡”é—®é¢˜.md)  
> [[ä¸­ç­‰, ç‰›å®¢] æ²¡æœ‰é‡å¤é¡¹æ•°å­—çš„å…¨æ’åˆ—](ç‰›å®¢_0043_ä¸­ç­‰_æ²¡æœ‰é‡å¤é¡¹æ•°å­—çš„å…¨æ’åˆ—.md)  
> [[ä¸­ç­‰, ç‰›å®¢] é›†åˆçš„æ‰€æœ‰å­é›†(ä¸€)](../02/ç‰›å®¢_0027_ä¸­ç­‰_é›†åˆçš„æ‰€æœ‰å­é›†(ä¸€).md)  
  > 
> [[å›°éš¾, å‰‘æŒ‡Offer] æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…](../../2021/11/å‰‘æŒ‡Offer_1900_å›°éš¾_æ­£åˆ™è¡¨è¾¾å¼åŒ¹é….md)  
> [[å›°éš¾, ç‰›å®¢] æ•°ç‹¬](ç‰›å®¢_0047_å›°éš¾_æ•°ç‹¬.md)  
  > 
> [[ç®€å•, LeetCode] äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ ğŸ”¥](../07/LeetCode_0104_ç®€å•_äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦.md)  
> [[ç®€å•, å‰‘æŒ‡Offer] äºŒå‰æ ‘çš„é•œåƒ](../../2021/11/å‰‘æŒ‡Offer_2700_ç®€å•_äºŒå‰æ ‘çš„é•œåƒ.md)  
> [[ç®€å•, å‰‘æŒ‡Offer] ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨](../../2021/11/å‰‘æŒ‡Offer_0600_ç®€å•_ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨.md)  
> [[ç®€å•, å‰‘æŒ‡Offer] å¯¹ç§°çš„äºŒå‰æ ‘](../../2021/11/å‰‘æŒ‡Offer_2800_ç®€å•_å¯¹ç§°çš„äºŒå‰æ ‘.md)  
  > 

</details>
<details><summary><b>ä½è¿ç®—</b></summary>

> [[ä¸­ç­‰, LeetCode] ä¸¤æ•°ç›¸é™¤](../../2021/10/LeetCode_0029_ä¸­ç­‰_ä¸¤æ•°ç›¸é™¤.md)  
> [[ä¸­ç­‰, LeetCode] é‡å¤çš„DNAåºåˆ—](../07/LeetCode_0187_ä¸­ç­‰_é‡å¤çš„DNAåºåˆ—.md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer] æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°](../01/å‰‘æŒ‡Offer_5601_ä¸­ç­‰_æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°.md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer] æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°](../01/å‰‘æŒ‡Offer_5602_ä¸­ç­‰_æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°.md)  
> [[ä¸­ç­‰, ç‰›å®¢] æ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„ä¸¤ä¸ªæ•°å­— ğŸ”¥](ç‰›å®¢_0075_ä¸­ç­‰_æ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„ä¸¤ä¸ªæ•°å­—.md)  
  > 
> [[ç®€å•, å‰‘æŒ‡Offer] ä¸ç”¨åŠ å‡ä¹˜é™¤åšåŠ æ³•](../01/å‰‘æŒ‡Offer_6500_ç®€å•_ä¸ç”¨åŠ å‡ä¹˜é™¤åšåŠ æ³•.md)  
> [[ç®€å•, å‰‘æŒ‡Offer] äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°](../../2021/11/å‰‘æŒ‡Offer_1500_ç®€å•_äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°.md)  
> [[ç®€å•, ç‰›å®¢] äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•° ğŸ”¥](../05/ç‰›å®¢_0120_ç®€å•_äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°.md)  
  > 

</details>
<!--END_SECTION:relate-->