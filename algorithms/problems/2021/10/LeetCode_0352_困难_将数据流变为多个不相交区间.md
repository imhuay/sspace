## å°†æ•°æ®æµå˜ä¸ºå¤šä¸ªä¸ç›¸äº¤åŒºé—´
<!--START_SECTION:badge-->
![last modify](https://img.shields.io/static/v1?label=last%20modify&message=2025-07-08%2016%3A53%3A13&label_color=gray&color=thistle&style=flat-square)
[![](https://img.shields.io/static/v1?label=&message=%E5%9B%B0%E9%9A%BE&label_color=gray&color=yellow&style=flat-square)](../../../README.md#å›°éš¾)
[![](https://img.shields.io/static/v1?label=&message=LeetCode&label_color=gray&color=green&style=flat-square)](../../../README.md#leetcode)
[![](https://img.shields.io/static/v1?label=&message=%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE&label_color=gray&color=blue&style=flat-square)](../../../README.md#äºŒåˆ†æŸ¥æ‰¾)
[![](https://img.shields.io/static/v1?label=&message=%E6%A8%A1%E6%8B%9F&label_color=gray&color=blue&style=flat-square)](../../../README.md#æ¨¡æ‹Ÿ)
<!--END_SECTION:badge-->
<!--info
tags: [äºŒåˆ†æŸ¥æ‰¾, æ¨¡æ‹Ÿ]
source: LeetCode
level: å›°éš¾
number: '0352'
name: å°†æ•°æ®æµå˜ä¸ºå¤šä¸ªä¸ç›¸äº¤åŒºé—´
companies: []
-->

<summary><b>é—®é¢˜æè¿°</b></summary>

```txt
ç»™ä½ ä¸€ä¸ªç”±éè´Ÿæ•´æ•° a1, a2, ..., an ç»„æˆçš„æ•°æ®æµè¾“å…¥, è¯·ä½ å°†åˆ°ç›®å‰ä¸ºæ­¢çœ‹åˆ°çš„æ•°å­—æ€»ç»“ä¸ºä¸ç›¸äº¤çš„åŒºé—´åˆ—è¡¨.

å®ç° SummaryRanges ç±»:
    SummaryRanges() ä½¿ç”¨ä¸€ä¸ªç©ºæ•°æ®æµåˆå§‹åŒ–å¯¹è±¡.
    void addNum(int val) å‘æ•°æ®æµä¸­åŠ å…¥æ•´æ•° val .
    int[][] getIntervals() ä»¥ä¸ç›¸äº¤åŒºé—´ [starti, endi] çš„åˆ—è¡¨å½¢å¼è¿”å›å¯¹æ•°æ®æµä¸­æ•´æ•°çš„æ€»ç»“.

è¿›é˜¶: å¦‚æœå­˜åœ¨å¤§é‡åˆå¹¶, å¹¶ä¸”ä¸æ•°æ®æµçš„å¤§å°ç›¸æ¯”, ä¸ç›¸äº¤åŒºé—´çš„æ•°é‡å¾ˆå°, è¯¥æ€ä¹ˆåŠ?

æ¥æº: åŠ›æ‰£ (LeetCode)
é“¾æ¥: https://leetcode-cn.com/problems/data-stream-as-disjoint-intervals
è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰. å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒ, éå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„.
```

** "è¿›é˜¶" **: åœ¨æ’å…¥è¿‡ç¨‹ä¸­å®Œæˆåˆå¹¶æ“ä½œ;

<details><summary><b>ç¤ºä¾‹</b></summary>

```txt
è¾“å…¥:
    ["SummaryRanges", "addNum", "getIntervals", "addNum", "getIntervals", "addNum", "getIntervals", "addNum", "getIntervals", "addNum", "getIntervals"]
[[], [1], [], [3], [], [7], [], [2], [], [6], []]
è¾“å‡º:
    [null, null, [[1, 1]], null, [[1, 1], [3, 3]], null, [[1, 1], [3, 3], [7, 7]], null, [[1, 3], [7, 7]], null, [[1, 3], [6, 7]]]

è§£é‡Š:
    SummaryRanges summaryRanges = new SummaryRanges();
    summaryRanges.addNum(1);      // arr = [1]
    summaryRanges.getIntervals(); // è¿”å› [[1, 1]]
    summaryRanges.addNum(3);      // arr = [1, 3]
    summaryRanges.getIntervals(); // è¿”å› [[1, 1], [3, 3]]
    summaryRanges.addNum(7);      // arr = [1, 3, 7]
    summaryRanges.getIntervals(); // è¿”å› [[1, 1], [3, 3], [7, 7]]
    summaryRanges.addNum(2);      // arr = [1, 2, 3, 7]
    summaryRanges.getIntervals(); // è¿”å› [[1, 3], [7, 7]]
    summaryRanges.addNum(6);      // arr = [1, 2, 3, 6, 7]
    summaryRanges.getIntervals(); // è¿”å› [[1, 3], [6, 7]]

æç¤º:
    0 <= val <= 10^4
    æœ€å¤šè°ƒç”¨ addNum å’Œ getIntervals æ–¹æ³• 3 * 10^4 æ¬¡

æ¥æº: åŠ›æ‰£ (LeetCode)
é“¾æ¥: https://leetcode-cn.com/problems/data-stream-as-disjoint-intervals
è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰. å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒ, éå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„.
```

</details>


<summary><b>æ€è·¯</b></summary>

<details><summary><b>æ³•1) Python: æš´åŠ›æ±‚è§£</b></summary>

- æ¯æ¬¡ `getIntervals` æ—¶, å…ˆå¯¹æ•°ç»„æ’åº, ç„¶åä¾æ¬¡æ‰¾å‡ºæ¯ä¸ªä¸ç›¸äº¤çš„åŒºé—´;

```python
class SummaryRanges:

    def __init__(self):
        self.ls = []

    def addNum(self, val: int) -> None:
        """"""
        self.ls.append(val)

    def getIntervals(self) -> List[List[int]]:
        """"""
        ls = sorted(self.ls)
        ret = []
        l = ls[0]
        for i in range(1, len(ls)):
            if ls[i] - ls[i-1] > 1:  # åˆ¤æ–­æ˜¯å¦éœ€è¦åˆå¹¶
                ret.append([l, ls[i-1]])
                l = ls[i]

        ret.append([l, ls[-1]])

        return ret
```

</details>


<details><summary><b>æ³•2) Python: æ¨¡æ‹Ÿ, åˆ†æƒ…å†µè®¨è®º</b></summary>

- æ˜ç¡®æ¯æ¬¡ `addNum` æ—¶, åŒºé—´ä¼šå‘ç”Ÿé‚£äº›å˜åŒ–:
    - æƒ…å†µ1: å­˜åœ¨ä¸€ä¸ªåŒºé—´ `[l, r]` æ»¡è¶³ `l <= val <= r`;
    - æƒ…å†µ2: å­˜åœ¨ä¸€ä¸ªåŒºé—´ `[l, r]` æ»¡è¶³ `r + 1 == val`;
    - æƒ…å†µ3: å­˜åœ¨ä¸€ä¸ªåŒºé—´ `[l, r]` æ»¡è¶³ `l - 1 == val`;
    - æƒ…å†µ4: å­˜åœ¨ä¸¤ä¸ªä¸ªåŒºé—´ `[l0, r0]` å’Œ `[l1, r1]` æ»¡è¶³ `r0 + 1 == val == l1 - 1`, å³åŠ å…¥ val å, ä¼šåˆå¹¶ä¸ºä¸€ä¸ªåŒºé—´ `[l0, r1]`
    - æƒ…å†µ5: ä»¥ä¸Šå‡ä¸æ»¡è¶³, åŠ å…¥å val å•ç‹¬æˆä¸ºä¸€ä¸ªåŒºé—´;

- è¿™é‡Œä½¿ç”¨äº† `SortedDict` é™ä½äº†ä»£ç éš¾åº¦, ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªæœ‰åºæ•°ç»„æ¥æ¨¡æ‹Ÿ;

- æ—¶é—´å¤æ‚åº¦: `addNum O(NlgN)`ã€`getIntervals O(N)`;
- ç©ºé—´å¤æ‚åº¦: `O(N)`;


```python
from sortedcontainers import SortedDict
from bisect import bisect_right, bisect_left

class SummaryRanges:

    def __init__(self):
        self.ret = SortedDict()  # {l: r}
        # åŠ å…¥é¦–å°¾ä¸¤ä¸ªå“¨å…µ, é˜²æ­¢åŒºé—´ä¸å­˜åœ¨çš„æƒ…å†µ, è¿™æ ·ä¼šå¾’å¢å¾ˆå¤šåˆ¤æ–­
        self.ret[-10] = -10
        self.ret[10010] = 10010

    def addNum(self, val: int) -> None:
        ret = self.ret
        L = list(self.ret.keys())
        R = list(self.ret.values())

        # äºŒåˆ†æ‰¾å‡º val çš„ç›¸é‚»åŒºé—´
        idx = bisect_left(L, val)  # idx = ret.bisect_left(val)
        pre = L[idx - 1], R[idx - 1]
        nxt = L[idx], R[idx]

        if pre[0] <= val <= pre[1] or nxt[0] <= val <= nxt[1]:  # æƒ…å†µ1
            pass
        elif pre[1] + 1 == val == nxt[0] - 1:  # æƒ…å†µ4
            ret.pop(nxt[0])
            ret[pre[0]] = nxt[1]
        elif pre[1] + 1 == val:  # æƒ…å†µ2
            ret[pre[0]] = val
        elif nxt[0] - 1 == val:  # æƒ…å†µ3
            ret.pop(nxt[0])
            ret[val] = nxt[1]
        else:  # æƒ…å†µ5
            ret[val] = val

    def getIntervals(self) -> List[List[int]]:
        return list(self.ret.items())[1:-1]  # å»é™¤ä¸¤ä¸ªå“¨å…µ
```

- ä¸Šé¢çš„ä»£ç ä¸­ç”¨åˆ°äº† `SortedDict`, ç¤ºä¾‹:

```python
>>> d = SortedDict()
>>> d[3] = 33
>>> d[2] = 22
>>> d[4] = 44
>>> d[6] = 66
>>> d[7] = 77
>>> d
SortedDict({2: 22, 3: 33, 4: 44, 6: 66, 7: 77})
>>> d.bisect_left(4)  # äºŒåˆ†æŸ¥æ‰¾è¿”å›çš„æ˜¯æ’å…¥ä½ç½®
2
>>> d.bisect_right(4)  # left å’Œ right çš„åŒºåˆ«æ˜¯å¦‚æœæ’å…¥å€¼å·²å­˜åœ¨, åˆ™ left ä¼šæ’åˆ°å‰é¢, right ä¼šæ’åˆ°åé¢
3
```

</details>


<!--START_SECTION:relate-->
---

### ç›¸å…³ä¸»é¢˜

<details><summary><b>äºŒåˆ†æŸ¥æ‰¾</b></summary>

> [[ä¸­ç­‰, LeetCode] ä¸¤æ•°ç›¸é™¤](LeetCode_0029_ä¸­ç­‰_ä¸¤æ•°ç›¸é™¤.md)  
> [[ä¸­ç­‰, LeetCode] åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® ğŸ”¥](../../2022/10/LeetCode_0034_ä¸­ç­‰_åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®.md)  
> [[ä¸­ç­‰, LeetCode] æœç´¢äºŒç»´çŸ©é˜µ II ğŸ”¥](../../2022/07/LeetCode_0240_ä¸­ç­‰_æœç´¢äºŒç»´çŸ©é˜µII.md)  
> [[ä¸­ç­‰, LeetCode] æœç´¢æ—‹è½¬æ’åºæ•°ç»„ ğŸ”¥](LeetCode_0033_ä¸­ç­‰_æœç´¢æ—‹è½¬æ’åºæ•°ç»„.md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer2] æ•´æ•°é™¤æ³• ğŸ”¥](../../2022/09/å‰‘æŒ‡Offer2_001_ä¸­ç­‰_æ•´æ•°é™¤æ³•.md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer] äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾](../11/å‰‘æŒ‡Offer_0400_ä¸­ç­‰_äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾.md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer] æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹ (å¿«é€Ÿå¹‚) ğŸ”¥](../11/å‰‘æŒ‡Offer_1600_ä¸­ç­‰_æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹(å¿«é€Ÿå¹‚).md)  
> [[ä¸­ç­‰, ç‰›å®¢] äºŒåˆ†æŸ¥æ‰¾-II](../../2022/04/ç‰›å®¢_0105_ä¸­ç­‰_äºŒåˆ†æŸ¥æ‰¾-II.md)  
> [[ä¸­ç­‰, ç‰›å®¢] äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾](../../2022/02/ç‰›å®¢_0029_ä¸­ç­‰_äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾.md)  
> [[ä¸­ç­‰, ç‰›å®¢] å¯»æ‰¾å³°å€¼ ğŸ”¥](../../2022/04/ç‰›å®¢_0107_ä¸­ç­‰_å¯»æ‰¾å³°å€¼.md)  
> [[ä¸­ç­‰, ç‰›å®¢] çŸ©é˜µå…ƒç´ æŸ¥æ‰¾](../../2022/04/ç‰›å®¢_0086_ä¸­ç­‰_çŸ©é˜µå…ƒç´ æŸ¥æ‰¾.md)  
  > 
> [[å›°éš¾, LeetCode] å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•° ğŸ”¥](../../2022/02/LeetCode_0004_å›°éš¾_å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°.md)  
> [[å›°éš¾, ç‰›å®¢] åœ¨ä¸¤ä¸ªé•¿åº¦ç›¸ç­‰çš„æ’åºæ•°ç»„ä¸­æ‰¾åˆ°ä¸Šä¸­ä½æ•°](../../2022/02/ç‰›å®¢_0036_å›°éš¾_åœ¨ä¸¤ä¸ªé•¿åº¦ç›¸ç­‰çš„æ’åºæ•°ç»„ä¸­æ‰¾åˆ°ä¸Šä¸­ä½æ•°.md)  
  > 
> [[ç®€å•, LeetCode] x çš„å¹³æ–¹æ ¹ ğŸ”¥](../../2022/10/LeetCode_0069_ç®€å•_xçš„å¹³æ–¹æ ¹.md)  
> [[ç®€å•, LeetCode] æ’åˆ—ç¡¬å¸](LeetCode_0441_ç®€å•_æ’åˆ—ç¡¬å¸.md)  
> [[ç®€å•, å‰‘æŒ‡Offer2] å±±å³°æ•°ç»„çš„é¡¶éƒ¨](../../2022/09/å‰‘æŒ‡Offer2_069_ç®€å•_å±±å³°æ•°ç»„çš„é¡¶éƒ¨.md)  
> [[ç®€å•, å‰‘æŒ‡Offer] åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­—](../../2022/01/å‰‘æŒ‡Offer_5302_ç®€å•_åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­—.md)  
> [[ç®€å•, å‰‘æŒ‡Offer] æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—](../11/å‰‘æŒ‡Offer_1100_ç®€å•_æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—.md)  
> [[ç®€å•, å‰‘æŒ‡Offer] æ±‚0ï½n-1ä¸­ç¼ºå¤±çš„æ•°å­—](../../2022/01/å‰‘æŒ‡Offer_5301_ç®€å•_æ±‚0ï½n-1ä¸­ç¼ºå¤±çš„æ•°å­—.md)  
> [[ç®€å•, ç‰›å®¢] åœ¨æ—‹è½¬è¿‡çš„æœ‰åºæ•°ç»„ä¸­å¯»æ‰¾ç›®æ ‡å€¼](../../2022/03/ç‰›å®¢_0048_ç®€å•_åœ¨æ—‹è½¬è¿‡çš„æœ‰åºæ•°ç»„ä¸­å¯»æ‰¾ç›®æ ‡å€¼.md)  
> [[ç®€å•, ç‰›å®¢] æ•°å­—åœ¨å‡åºæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°](../../2022/03/ç‰›å®¢_0074_ç®€å•_æ•°å­—åœ¨å‡åºæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°.md)  
> [[ç®€å•, ç‰›å®¢] æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—](../../2022/03/ç‰›å®¢_0071_ç®€å•_æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—.md)  
> [[ç®€å•, ç‰›å®¢] æ±‚å¹³æ–¹æ ¹ ğŸ”¥](../../2022/02/ç‰›å®¢_0032_ç®€å•_æ±‚å¹³æ–¹æ ¹.md)  
  > 

</details>
<details><summary><b>æ¨¡æ‹Ÿ</b></summary>

> [[ä¸­ç­‰, LeetCode] åˆ†å‰²æ•°ç»„](../../2022/06/LeetCode_0915_ä¸­ç­‰_åˆ†å‰²æ•°ç»„.md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer] ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº](../../2022/01/å‰‘æŒ‡Offer_6300_ä¸­ç­‰_ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº.md)  
> [[ä¸­ç­‰, å‰‘æŒ‡Offer] åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­— (çº¦ç‘Ÿå¤«ç¯é—®é¢˜) ğŸ”¥](../../2022/01/å‰‘æŒ‡Offer_6200_ä¸­ç­‰_åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—(çº¦ç‘Ÿå¤«ç¯é—®é¢˜).md)  
> [[ä¸­ç­‰, ç‰›å®¢] å¤§æ•°ä¹˜æ³•](../../2022/01/ç‰›å®¢_0010_ä¸­ç­‰_å¤§æ•°ä¹˜æ³•.md)  
> [[ä¸­ç­‰, ç‰›å®¢] å¤§æ•°åŠ æ³•](../../2022/01/ç‰›å®¢_0001_ä¸­ç­‰_å¤§æ•°åŠ æ³•.md)  
> [[ä¸­ç­‰, ç‰›å®¢] æœ€é•¿å›æ–‡å­ä¸²](../../2022/01/ç‰›å®¢_0017_ä¸­ç­‰_æœ€é•¿å›æ–‡å­ä¸².md)  
> [[ä¸­ç­‰, ç‰›å®¢] èºæ—‹çŸ©é˜µ](../../2022/03/ç‰›å®¢_0038_ä¸­ç­‰_èºæ—‹çŸ©é˜µ.md)  
  > 
> [[ç®€å•, LeetCode] äº²å¯†å­—ç¬¦ä¸²](../11/LeetCode_0859_ç®€å•_äº²å¯†å­—ç¬¦ä¸².md)  
> [[ç®€å•, å‰‘æŒ‡Offer] æ‰‘å…‹ç‰Œä¸­çš„é¡ºå­](../../2022/01/å‰‘æŒ‡Offer_6100_ç®€å•_æ‰‘å…‹ç‰Œä¸­çš„é¡ºå­.md)  
> [[ç®€å•, å‰‘æŒ‡Offer] æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­— (æ‘©å°”æŠ•ç¥¨) ğŸ”¥](../12/å‰‘æŒ‡Offer_3900_ç®€å•_æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­—(æ‘©å°”æŠ•ç¥¨).md)  
> [[ç®€å•, ç‰›å®¢] ä¹°å–è‚¡ç¥¨çš„æœ€å¥½æ—¶æœº(ä¸€)](../../2022/01/ç‰›å®¢_0007_ç®€å•_ä¹°å–è‚¡ç¥¨çš„æœ€å¥½æ—¶æœº(ä¸€).md)  
> [[ç®€å•, ç‰›å®¢] åè½¬æ•°å­—](../../2022/03/ç‰›å®¢_0057_ç®€å•_åè½¬æ•°å­—.md)  
> [[ç®€å•, ç‰›å®¢] å­—ç¬¦ä¸²å˜å½¢](../../2022/04/ç‰›å®¢_0089_ç®€å•_å­—ç¬¦ä¸²å˜å½¢.md)  
> [[ç®€å•, ç‰›å®¢] æ‰‘å…‹ç‰Œé¡ºå­](../../2022/03/ç‰›å®¢_0063_ç®€å•_æ‰‘å…‹ç‰Œé¡ºå­.md)  
> [[ç®€å•, ç‰›å®¢] æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­—](../../2022/03/ç‰›å®¢_0073_ç®€å•_æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­—.md)  
  > 

</details>
<!--END_SECTION:relate-->